# [1109. èˆªç­é¢„è®¢ç»Ÿè®¡](https://leetcode.cn/problems/corporate-flight-bookings/)

- æ ‡ç­¾ï¼šæ•°ç»„ã€å‰ç¼€å’Œã€å·®åˆ†æ•°ç»„
- éš¾åº¦ï¼šä¸­ç­‰

## é¢˜ç›®å¤§æ„

**æè¿°**ï¼šç»™å®šæ•´æ•° `n`ï¼Œä»£è¡¨ `n` ä¸ªèˆªç­ã€‚å†ç»™å®šä¸€ä¸ªåŒ…å«ä¸‰å…ƒç»„çš„æ•°ç»„ `bookings`ï¼Œä»£è¡¨èˆªç­é¢„è®¢è¡¨ã€‚è¡¨ä¸­ç¬¬ `i` æ¡é¢„è®¢è®°å½• $bookings[i] = [first_i, last_i, seats_i]$ æ„å‘³ç€åœ¨ä» $first_i$ åˆ° $last_i$ ï¼ˆåŒ…å« $first_i$ å’Œ $last_i$ï¼‰çš„ æ¯ä¸ªèˆªç­ä¸Šé¢„è®¢äº† $seats_i$ ä¸ªåº§ä½ã€‚

**è¦æ±‚**ï¼šè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `answer`ï¼Œé‡Œé¢å…ƒç´ æ˜¯æ¯ä¸ªèˆªç­é¢„å®šçš„åº§ä½æ€»æ•°ã€‚

**è¯´æ˜**ï¼š

- $1 \le n \le 2 * 10^4$ã€‚
- $1 \le bookings.length \le 2 * 10^4$ã€‚
- $bookings[i].length == 3$ã€‚
- $1 \le first_i \le last_i \le n$ã€‚
- $1 \le seats_i \le 10^4$

**ç¤ºä¾‹**ï¼š

- ç¤ºä¾‹ 1ï¼š

```python
ç»™å®š n = 5ã€‚åˆå§‹ answer = [0, 0, 0, 0, 0]

èˆªç­ç¼–å·        1   2   3   4   5
é¢„è®¢è®°å½• 1 ï¼š   10  10
é¢„è®¢è®°å½• 2 ï¼š       20  20
é¢„è®¢è®°å½• 3 ï¼š       25  25  25  25
æ€»åº§ä½æ•°ï¼š      10  55  45  25  25

æœ€ç»ˆ answer = [10, 55, 45, 25, 25]
```

## è§£é¢˜æ€è·¯

### æ€è·¯ 1ï¼šçº¿æ®µæ ‘

- åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦ä¸º `n`ï¼Œå€¼å…¨ä¸º `0` çš„ `nums` æ•°ç»„ã€‚
- ç„¶åæ ¹æ® `nums` æ•°ç»„æ„å»ºä¸€æ£µçº¿æ®µæ ‘ã€‚æ¯ä¸ªçº¿æ®µæ ‘çš„èŠ‚ç‚¹ç±»å­˜å‚¨å½“å‰åŒºé—´çš„å·¦å³è¾¹ç•Œå’Œè¯¥åŒºé—´çš„å’Œã€‚å¹¶ä¸”çº¿æ®µæ ‘ä½¿ç”¨å»¶è¿Ÿæ ‡è®°ã€‚
- ç„¶åéå†ä¸‰å…ƒç»„æ“ä½œï¼Œè¿›è¡ŒåŒºé—´ç´¯åŠ è¿ç®—ã€‚
- æœ€åä»çº¿æ®µæ ‘ä¸­æŸ¥è¯¢æ•°ç»„æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›è¯¥æ•°ç»„å³å¯ã€‚

è¿™æ ·æ„å»ºçº¿æ®µæ ‘çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(\log n)$ï¼Œå•æ¬¡åŒºé—´æ›´æ–°çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(\log n)$ï¼Œå•æ¬¡åŒºé—´æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(\log n)$ã€‚æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º $O(\log n)$ã€‚

### æ€è·¯ 1 çº¿æ®µæ ‘ä»£ç ï¼š

```python
# çº¿æ®µæ ‘çš„èŠ‚ç‚¹ç±»
class SegTreeNode:
    def __init__(self, val=0):
        self.left = -1                              # åŒºé—´å·¦è¾¹ç•Œ
        self.right = -1                             # åŒºé—´å³è¾¹ç•Œ
        self.val = val                              # èŠ‚ç‚¹å€¼ï¼ˆåŒºé—´å€¼ï¼‰
        self.lazy_tag = None                        # åŒºé—´å’Œé—®é¢˜çš„å»¶è¿Ÿæ›´æ–°æ ‡è®°
        
        
# çº¿æ®µæ ‘ç±»
class SegmentTree:
    # åˆå§‹åŒ–çº¿æ®µæ ‘æ¥å£
    def __init__(self, nums, function):
        self.size = len(nums)
        self.tree = [SegTreeNode() for _ in range(4 * self.size)]  # ç»´æŠ¤ SegTreeNode æ•°ç»„
        self.nums = nums                            # åŸå§‹æ•°æ®
        self.function = function                    # function æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå·¦å³åŒºé—´çš„èšåˆæ–¹æ³•
        if self.size > 0:
            self.__build(0, 0, self.size - 1)
    
    # å•ç‚¹æ›´æ–°æ¥å£ï¼šå°† nums[i] æ›´æ”¹ä¸º val
    def update_point(self, i, val):
        self.nums[i] = val
        self.__update_point(i, val, 0)
    
    # åŒºé—´æ›´æ–°æ¥å£ï¼šå°†åŒºé—´ä¸º [q_left, q_right] ä¸Šçš„æ‰€æœ‰å…ƒç´ å€¼åŠ ä¸Š val
    def update_interval(self, q_left, q_right, val):
        self.__update_interval(q_left, q_right, val, 0)
        
    # åŒºé—´æŸ¥è¯¢æ¥å£ï¼šæŸ¥è¯¢åŒºé—´ä¸º [q_left, q_right] çš„åŒºé—´å€¼
    def query_interval(self, q_left, q_right):
        return self.__query_interval(q_left, q_right, 0)
    
    # è·å– nums æ•°ç»„æ¥å£ï¼šè¿”å› nums æ•°ç»„
    def get_nums(self):
        for i in range(self.size):
            self.nums[i] = self.query_interval(i, i)
        return self.nums
        
        
    # ä»¥ä¸‹ä¸ºå†…éƒ¨å®ç°æ–¹æ³•
    
    # æ„å»ºçº¿æ®µæ ‘å®ç°æ–¹æ³•ï¼šèŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡ä¸º indexï¼ŒèŠ‚ç‚¹çš„åŒºé—´ä¸º [left, right]
    def __build(self, index, left, right):
        self.tree[index].left = left
        self.tree[index].right = right
        if left == right:                           # å¶å­èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å€¼ä¸ºå¯¹åº”ä½ç½®çš„å…ƒç´ å€¼
            self.tree[index].val = self.nums[left]
            return
    
        mid = left + (right - left) // 2            # å·¦å³èŠ‚ç‚¹åˆ’åˆ†ç‚¹
        left_index = index * 2 + 1                  # å·¦å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        right_index = index * 2 + 2                 # å³å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        self.__build(left_index, left, mid)         # é€’å½’åˆ›å»ºå·¦å­æ ‘
        self.__build(right_index, mid + 1, right)   # é€’å½’åˆ›å»ºå³å­æ ‘
        self.__pushup(index)                        # å‘ä¸Šæ›´æ–°èŠ‚ç‚¹çš„åŒºé—´å€¼
    
    # å•ç‚¹æ›´æ–°å®ç°æ–¹æ³•ï¼šå°† nums[i] æ›´æ”¹ä¸º valï¼ŒèŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡ä¸º index
    def __update_point(self, i, val, index):
        left = self.tree[index].left
        right = self.tree[index].right
        
        if left == right:
            self.tree[index].val = val              # å¶å­èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å€¼ä¿®æ”¹ä¸º val
            return
        
        mid = left + (right - left) // 2            # å·¦å³èŠ‚ç‚¹åˆ’åˆ†ç‚¹
        left_index = index * 2 + 1                  # å·¦å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        right_index = index * 2 + 2                 # å³å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        if i <= mid:                                # åœ¨å·¦å­æ ‘ä¸­æ›´æ–°èŠ‚ç‚¹å€¼
            self.__update_point(i, val, left_index)
        else:                                       # åœ¨å³å­æ ‘ä¸­æ›´æ–°èŠ‚ç‚¹å€¼
            self.__update_point(i, val, right_index)
        
        self.__pushup(index)                        # å‘ä¸Šæ›´æ–°èŠ‚ç‚¹çš„åŒºé—´å€¼
    
    # åŒºé—´æ›´æ–°å®ç°æ–¹æ³•
    def __update_interval(self, q_left, q_right, val, index):
        left = self.tree[index].left
        right = self.tree[index].right
        
        if left >= q_left and right <= q_right:     # èŠ‚ç‚¹æ‰€åœ¨åŒºé—´è¢« [q_left, q_right] æ‰€è¦†ç›–        
            if self.tree[index].lazy_tag is not None:
                self.tree[index].lazy_tag += val    # å°†å½“å‰èŠ‚ç‚¹çš„å»¶è¿Ÿæ ‡è®°å¢åŠ  val
            else:
                self.tree[index].lazy_tag = val     # å°†å½“å‰èŠ‚ç‚¹çš„å»¶è¿Ÿæ ‡è®°å¢åŠ  val
            interval_size = (right - left + 1)      # å½“å‰èŠ‚ç‚¹æ‰€åœ¨åŒºé—´å¤§å°
            self.tree[index].val += val * interval_size  # å½“å‰èŠ‚ç‚¹æ‰€åœ¨åŒºé—´æ¯ä¸ªå…ƒç´ å€¼å¢åŠ  val
            return
        
        if right < q_left or left > q_right:        # èŠ‚ç‚¹æ‰€åœ¨åŒºé—´ä¸ [q_left, q_right] æ— å…³
            return
    
        self.__pushdown(index)                      # å‘ä¸‹æ›´æ–°èŠ‚ç‚¹çš„åŒºé—´å€¼
    
        mid = left + (right - left) // 2            # å·¦å³èŠ‚ç‚¹åˆ’åˆ†ç‚¹
        left_index = index * 2 + 1                  # å·¦å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        right_index = index * 2 + 2                 # å³å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        if q_left <= mid:                           # åœ¨å·¦å­æ ‘ä¸­æ›´æ–°åŒºé—´å€¼
            self.__update_interval(q_left, q_right, val, left_index)
        if q_right > mid:                           # åœ¨å³å­æ ‘ä¸­æ›´æ–°åŒºé—´å€¼
            self.__update_interval(q_left, q_right, val, right_index)
        
        self.__pushup(index)                        # å‘ä¸Šæ›´æ–°èŠ‚ç‚¹çš„åŒºé—´å€¼
    
    # åŒºé—´æŸ¥è¯¢å®ç°æ–¹æ³•ï¼šåœ¨çº¿æ®µæ ‘ä¸­æœç´¢åŒºé—´ä¸º [q_left, q_right] çš„åŒºé—´å€¼
    def __query_interval(self, q_left, q_right, index):
        left = self.tree[index].left
        right = self.tree[index].right
        
        if left >= q_left and right <= q_right:     # èŠ‚ç‚¹æ‰€åœ¨åŒºé—´è¢« [q_left, q_right] æ‰€è¦†ç›–
            return self.tree[index].val             # ç›´æ¥è¿”å›èŠ‚ç‚¹å€¼
        if right < q_left or left > q_right:        # èŠ‚ç‚¹æ‰€åœ¨åŒºé—´ä¸ [q_left, q_right] æ— å…³
            return 0
    
        self.__pushdown(index)
    
        mid = left + (right - left) // 2            # å·¦å³èŠ‚ç‚¹åˆ’åˆ†ç‚¹
        left_index = index * 2 + 1                  # å·¦å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        right_index = index * 2 + 2                 # å³å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        res_left = 0                                # å·¦å­æ ‘æŸ¥è¯¢ç»“æœ
        res_right = 0                               # å³å­æ ‘æŸ¥è¯¢ç»“æœ
        if q_left <= mid:                           # åœ¨å·¦å­æ ‘ä¸­æŸ¥è¯¢
            res_left = self.__query_interval(q_left, q_right, left_index)
        if q_right > mid:                           # åœ¨å³å­æ ‘ä¸­æŸ¥è¯¢
            res_right = self.__query_interval(q_left, q_right, right_index)
        
        return self.function(res_left, res_right)   # è¿”å›å·¦å³å­æ ‘å…ƒç´ å€¼çš„èšåˆè®¡ç®—ç»“æœ
    
    # å‘ä¸Šæ›´æ–°å®ç°æ–¹æ³•ï¼šæ›´æ–°ä¸‹æ ‡ä¸º index çš„èŠ‚ç‚¹åŒºé—´å€¼ ç­‰äº è¯¥èŠ‚ç‚¹å·¦å³å­èŠ‚ç‚¹å…ƒç´ å€¼çš„èšåˆè®¡ç®—ç»“æœ
    def __pushup(self, index):
        left_index = index * 2 + 1                  # å·¦å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        right_index = index * 2 + 2                 # å³å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        self.tree[index].val = self.function(self.tree[left_index].val, self.tree[right_index].val)

    # å‘ä¸‹æ›´æ–°å®ç°æ–¹æ³•ï¼šæ›´æ–°ä¸‹æ ‡ä¸º index çš„èŠ‚ç‚¹æ‰€åœ¨åŒºé—´çš„å·¦å³å­èŠ‚ç‚¹çš„å€¼å’Œæ‡’æƒ°æ ‡è®°
    def __pushdown(self, index):
        lazy_tag = self.tree[index].lazy_tag
        if lazy_tag is None: 
            return
        
        left_index = index * 2 + 1                  # å·¦å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        right_index = index * 2 + 2                 # å³å­èŠ‚ç‚¹çš„å­˜å‚¨ä¸‹æ ‡
        
        if self.tree[left_index].lazy_tag is not None:
            self.tree[left_index].lazy_tag += lazy_tag  # æ›´æ–°å·¦å­èŠ‚ç‚¹æ‡’æƒ°æ ‡è®°
        else:
            self.tree[left_index].lazy_tag = lazy_tag
        left_size = (self.tree[left_index].right - self.tree[left_index].left + 1)
        self.tree[left_index].val += lazy_tag * left_size   # å·¦å­èŠ‚ç‚¹æ¯ä¸ªå…ƒç´ å€¼å¢åŠ  lazy_tag
        
        if self.tree[right_index].lazy_tag is not None:
            self.tree[right_index].lazy_tag += lazy_tag # æ›´æ–°å³å­èŠ‚ç‚¹æ‡’æƒ°æ ‡è®°
        else:
            self.tree[right_index].lazy_tag = lazy_tag
        right_size = (self.tree[right_index].right - self.tree[right_index].left + 1)
        self.tree[right_index].val += lazy_tag * right_size # å³å­èŠ‚ç‚¹æ¯ä¸ªå…ƒç´ å€¼å¢åŠ  lazy_tag
        
        self.tree[index].lazy_tag = None            # æ›´æ–°å½“å‰èŠ‚ç‚¹çš„æ‡’æƒ°æ ‡è®°


class Solution:
    def corpFlightBookings(self, bookings: List[List[int]], n: int) -> List[int]:
        nums = [0 for _ in range(n)]
        self.STree = SegmentTree(nums, lambda x, y: x + y)
        for booking in bookings:
            self.STree.update_interval(booking[0] - 1, booking[1] - 1, booking[2])

        return self.STree.get_nums()
```

# æ‹“å±•ï¼š å·®åˆ†æ•°ç»„
- å¯¹ nums æ•°ç»„æ„é€ ä¸€ä¸ª diff å·®åˆ†æ•°ç»„ï¼Œ`diff[i]` å°±æ˜¯ `nums[i]` å’Œ `nums[i-1]` ä¹‹å·®ï¼š
```python
diff = [0] * len(nums)
# æ„é€ å·®åˆ†æ•°ç»„
diff[0] = nums[0]
for i in range(1, len(nums)):
    diff[i] = nums[i] - nums[i - 1]
```
- é€šè¿‡è¿™ä¸ª diff å·®åˆ†æ•°ç»„å¯ä»¥åæ¨å‡ºåŸå§‹æ•°ç»„ nums:
```python
res = [0] * len(diff)
# æ ¹æ®å·®åˆ†æ•°ç»„æ„é€ ç»“æœæ•°ç»„
res[0] = diff[0]
for i in range(1, len(diff)):
    res[i] = res[i - 1] + diff[i]
```
- è¿™æ ·æ„é€ å·®åˆ†æ•°ç»„ diffï¼Œå°±å¯ä»¥å¿«é€Ÿè¿›è¡ŒåŒºé—´å¢å‡çš„æ“ä½œï¼Œå¦‚æœä½ æƒ³å¯¹åŒºé—´ `nums[i..j]` çš„å…ƒç´ å…¨éƒ¨åŠ  3ï¼Œé‚£ä¹ˆåªéœ€è¦è®© `diff[i] += 3`ï¼Œç„¶åå†è®© `diff[j+1] -= 3` å³å¯.åªè¦èŠ±è´¹ O(1) çš„æ—¶é—´ä¿®æ”¹ diff æ•°ç»„ï¼Œå°±ç›¸å½“äºç»™ nums çš„æ•´ä¸ªåŒºé—´åšäº†ä¿®æ”¹ã€‚å¤šæ¬¡ä¿®æ”¹ diffï¼Œç„¶åé€šè¿‡ diff æ•°ç»„åæ¨ï¼Œå³å¯å¾—åˆ° nums ä¿®æ”¹åçš„ç»“æœã€‚
- ç°åœ¨æˆ‘ä»¬æŠŠå·®åˆ†æ•°ç»„æŠ½è±¡æˆä¸€ä¸ªç±»ï¼ŒåŒ…å« increment æ–¹æ³•å’Œ result æ–¹æ³•ï¼š
```python
# å·®åˆ†æ•°ç»„å·¥å…·ç±»
class Difference:
    # å·®åˆ†æ•°ç»„
    def __init__(self, nums: List[int]):
        assert len(nums) > 0
        self.diff = [0] * len(nums)
        # æ ¹æ®åˆå§‹æ•°ç»„æ„é€ å·®åˆ†æ•°ç»„
        self.diff[0] = nums[0]
        for i in range(1, len(nums)):
            self.diff[i] = nums[i] - nums[i - 1]

    # ç»™é—­åŒºé—´ [i, j] å¢åŠ  valï¼ˆå¯ä»¥æ˜¯è´Ÿæ•°ï¼‰
    def increment(self, i: int, j: int, val: int) -> None:
        self.diff[i] += val
        if j + 1 < len(self.diff):
            self.diff[j + 1] -= val

    # è¿”å›ç»“æœæ•°ç»„
    def result(self) -> List[int]:
        res = [0] * len(self.diff)
        # æ ¹æ®å·®åˆ†æ•°ç»„æ„é€ ç»“æœæ•°ç»„
        res[0] = self.diff[0]
        for i in range(1, len(self.diff)):
            res[i] = res[i - 1] + self.diff[i]
        return res
```
## ç®—æ³•å®è·µï¼š
1. leetcode 370. åŒºé—´åŠ æ³•
å‡è®¾ä½ æœ‰ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ï¼Œåˆå§‹æƒ…å†µä¸‹æ‰€æœ‰çš„æ•°å­—å‡ä¸º 0ï¼Œä½ å°†ä¼šè¢«ç»™å‡º kâ€‹â€‹â€‹â€‹â€‹â€‹â€‹ ä¸ªæ›´æ–°çš„æ“ä½œã€‚

å…¶ä¸­ï¼Œæ¯ä¸ªæ“ä½œä¼šè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªä¸‰å…ƒç»„ï¼š[startIndex, endIndex, inc]ï¼Œä½ éœ€è¦å°†å­æ•°ç»„ A[startIndex ... endIndex]ï¼ˆåŒ…æ‹¬ startIndex å’Œ endIndexï¼‰å¢åŠ  incã€‚

è¯·ä½ è¿”å› k æ¬¡æ“ä½œåçš„æ•°ç»„ã€‚

ç¤ºä¾‹:

è¾“å…¥: length = 5, updates = [[1,3,2],[2,4,3],[0,2,-2]]
è¾“å‡º: [-2,0,3,5,3]
è§£é‡Š:

åˆå§‹çŠ¶æ€:
[0,0,0,0,0]

è¿›è¡Œäº†æ“ä½œ [1,3,2] åçš„çŠ¶æ€:
[0,2,2,2,0]

è¿›è¡Œäº†æ“ä½œ [2,4,3] åçš„çŠ¶æ€:
[0,2,5,5,3]

è¿›è¡Œäº†æ“ä½œ [0,2,-2] åçš„çŠ¶æ€:
[-2,0,3,5,3]
```python
def getModifiedArray(length: int, updates: List[List[int]]) -> List[int]:
    # nums åˆå§‹åŒ–ä¸ºå…¨ 0
    nums = [0] * length
    # æ„é€ å·®åˆ†è§£æ³•
    df = Difference(nums)
    
    for update in updates:
        i, j, val = update[0], update[1], update[2]
        df.increment(i, j, val)
    
    return df.result()
```
2. leetcode 1109: èˆªç­é¢„è®¢ç»Ÿè®¡
   ç»™ä½ è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ numsï¼Œå…¶ä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ 0ã€‚å†ç»™ä½ è¾“å…¥ä¸€ä¸ª bookingsï¼Œé‡Œé¢æ˜¯è‹¥å¹²ä¸‰å…ƒç»„ (i, j, k)ï¼Œæ¯ä¸ªä¸‰å…ƒç»„çš„å«ä¹‰å°±æ˜¯è¦æ±‚ä½ ç»™ nums æ•°ç»„çš„é—­åŒºé—´ `[i-1,j-1] `ä¸­æ‰€æœ‰å…ƒç´ éƒ½åŠ ä¸Š kã€‚è¯·ä½ è¿”å›æœ€åçš„ nums æ•°ç»„æ˜¯å¤šå°‘ï¼Ÿ
å› ä¸ºé¢˜ç›®è¯´çš„ n æ˜¯ä» 1 å¼€å§‹è®¡æ•°çš„ï¼Œè€Œæ•°ç»„ç´¢å¼•ä» 0 å¼€å§‹ï¼Œæ‰€ä»¥å¯¹äºè¾“å…¥çš„ä¸‰å…ƒç»„ (i, j, k)ï¼Œæ•°ç»„åŒºé—´åº”è¯¥å¯¹åº” `[i-1,j-1]`ã€‚
```python
# æ³¨æ„ï¼špython ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
# æœ¬ä»£ç ä¸ä¿è¯æ­£ç¡®æ€§ï¼Œä»…ä¾›å‚è€ƒã€‚å¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

def corpFlightBookings(bookings: List[List[int]], n: int) -> List[int]:
    # nums åˆå§‹åŒ–ä¸ºå…¨ 0
    nums = [0] * n
    # æ„é€ å·®åˆ†è§£æ³•
    df = Difference(nums)

    for booking in bookings:
        # æ³¨æ„è½¬æˆæ•°ç»„ç´¢å¼•è¦å‡ä¸€å“¦
        i = booking[0] - 1
        j = booking[1] - 1
        val = booking[2]
        # å¯¹åŒºé—´ nums[i..j] å¢åŠ  val
        df.increment(i, j, val)
    # è¿”å›æœ€ç»ˆçš„ç»“æœæ•°ç»„
    return df.result()
```

4. Leetcode 1094:æ‹¼è½¦
   ä½ æ˜¯ä¸€ä¸ªå¼€å…¬äº¤è½¦çš„å¸æœºï¼Œå…¬äº¤è½¦çš„æœ€å¤§è½½å®¢é‡ä¸º capacityï¼Œæ²¿é€”è¦ç»è¿‡è‹¥å¹²è½¦ç«™ï¼Œç»™ä½ ä¸€ä»½ä¹˜å®¢è¡Œç¨‹è¡¨ int[][] tripsï¼Œå…¶ä¸­ trips[i] = [num, start, end] ä»£è¡¨ç€æœ‰ num ä¸ªæ—…å®¢è¦ä»ç«™ç‚¹ start ä¸Šè½¦ï¼Œåˆ°ç«™ç‚¹ end ä¸‹è½¦ï¼Œè¯·ä½ è®¡ç®—æ˜¯å¦èƒ½å¤Ÿä¸€æ¬¡æŠŠæ‰€æœ‰æ—…å®¢è¿é€å®Œæ¯•ï¼ˆä¸èƒ½è¶…è¿‡æœ€å¤§è½½å®¢é‡ capacityï¼‰ã€‚
   æ¯”å¦‚è¾“å…¥ï¼š
`trips = [[2,1,5],[3,3,7]], capacity = 4`
è¿™å°±ä¸èƒ½ä¸€æ¬¡è¿å®Œï¼Œå› ä¸º `trips[1]` æœ€å¤šåªèƒ½ä¸Š 2 äººï¼Œå¦åˆ™è½¦å°±ä¼šè¶…è½½ã€‚

ç›¸ä¿¡ä½ å·²ç»èƒ½å¤Ÿè”æƒ³åˆ°å·®åˆ†æ•°ç»„æŠ€å·§äº†ï¼štrips[i] ä»£è¡¨ç€ä¸€ç»„åŒºé—´æ“ä½œï¼Œæ—…å®¢çš„ä¸Šè½¦å’Œä¸‹è½¦å°±ç›¸å½“äºæ•°ç»„çš„åŒºé—´åŠ å‡ï¼›åªè¦ç»“æœæ•°ç»„ä¸­çš„å…ƒç´ éƒ½å°äº capacityï¼Œå°±è¯´æ˜å¯ä»¥ä¸è¶…è½½è¿è¾“æ‰€æœ‰æ—…å®¢ã€‚

ä½†é—®é¢˜æ˜¯ï¼Œå·®åˆ†æ•°ç»„çš„é•¿åº¦ï¼ˆè½¦ç«™çš„ä¸ªæ•°ï¼‰åº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿé¢˜ç›®æ²¡æœ‰ç›´æ¥ç»™ï¼Œä½†ç»™å‡ºäº†æ•°æ®å–å€¼èŒƒå›´ï¼š
`0 <= trips[i][1] < trips[i][2] <= 1000`
è½¦ç«™ç¼–å·ä» 0 å¼€å§‹ï¼Œæœ€å¤šåˆ° 1000ï¼Œä¹Ÿå°±æ˜¯æœ€å¤šæœ‰ 1001 ä¸ªè½¦ç«™ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å·®åˆ†æ•°ç»„é•¿åº¦å¯ä»¥ç›´æ¥è®¾ç½®ä¸º 1001ï¼Œè¿™æ ·ç´¢å¼•åˆšå¥½èƒ½å¤Ÿæ¶µç›–æ‰€æœ‰è½¦ç«™çš„ç¼–å·ï¼š
```python
# æ³¨æ„ï¼špython ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
# æœ¬ä»£ç ä¸ä¿è¯æ­£ç¡®æ€§ï¼Œä»…ä¾›å‚è€ƒã€‚å¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

def carPooling(trips: List[List[int]], capacity: int) -> bool:
    # æœ€å¤šæœ‰ 1001 ä¸ªè½¦ç«™
    nums = [0] * 1001
    # æ„é€ å·®åˆ†è§£æ³•
    df = Difference(nums)

    for trip in trips:
        # ä¹˜å®¢æ•°é‡
        val = trip[0]
        # ç¬¬ trip[1] ç«™ä¹˜å®¢ä¸Šè½¦
        i = trip[1]
        # ç¬¬ trip[2] ç«™ä¹˜å®¢å·²ç»ä¸‹è½¦ï¼Œ
        # å³ä¹˜å®¢åœ¨è½¦ä¸Šçš„åŒºé—´æ˜¯ [trip[1], trip[2] - 1]
        j = trip[2] - 1
        # è¿›è¡ŒåŒºé—´æ“ä½œ
        df.increment(i, j, val)

    res = df.result()

    # å®¢è½¦è‡ªå§‹è‡³ç»ˆéƒ½ä¸åº”è¯¥è¶…è½½
    for i in range(len(res)):
        if capacity < res[i]:
            return False
    return True


class Difference:
    def __init__(self, nums: List[int]):
        self.nums = nums
        self.diff = [0] * (len(nums) + 1)

    def increment(self, i: int, j: int, val: int):
        self.diff[i] += val
        self.diff[j + 1] -= val

    def result(self) -> List[int]:
        res = [0] * len(self.nums)
        res[0] = self.diff[0]
        for i in range(1, len(self.nums)):
            res[i] = res[i - 1] + self.diff[i]
        return res
```
```python
class Solution:
    def carPooling(self, trips: List[List[int]], capacity: int) -> bool:
        bus = [0] * 1001

        for (numPassengersi, fromi, toi) in trips:
            bus[fromi] += numPassengersi
            if toi < len(bus):
                bus[toi] -= numPassengersi

        for i in range(1, 1001):
            bus[i] = bus[i] + bus[i - 1]

        for num in bus:
            if num > capacity:
                return False
        
        return True
```

